<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="Content-Language" content="ru">
<meta name="Robots" content="index, follow">
<title>AJAX загрузчик файлов изображений</title>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript" src="js/ajaxupload.3.5.js"></script>

<script type="text/javascript" >
	$(function(){
		var btnUpload=$('#upload');
		var status=$('#status');
		new AjaxUpload(btnUpload, {
			action: 'upload-file.php',
			name: 'uploadfile',
			onSubmit: function(file, ext){
				if (! (ext && /^(bmp|jpg|png|jpeg|gif)$/.test(ext))){ 
                    // extension is not allowed 
					status.text('Поддерживаемые форматы bmp, jpg, jpeg, png, gif');
					return false;
				}
				status.text('Загрузка...');
			},
			onComplete: function(file, response){
				//On completion clear the status
				status.text('');
				//Add uploaded file to list
				if(response==="success"){
					$('<li></li>').appendTo('#files').html('<img src="./uploads/'+file+'" alt=""><br>'+file).addClass('success');
				} else{
					$('<li></li>').appendTo('#files').text('Файл не загружен!' + file).addClass('error');
				}
			}
		});
		
	});
</script>
</head>
<body>


		<h1>AJAX-загрузчик файлов изображений</h1>
		
		<div id="upload" ><span>Выбрать файл<span></div><span id="status"></span>
		
		<ul id="files"></ul>

		

</body>
</html>